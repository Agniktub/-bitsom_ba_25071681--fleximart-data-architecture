# Star Schema Design Documentation

## Section 1: Schema Overview

**FACT TABLE: fact_sales**  
Grain: One row per order line item (per product sold in an order)  
Business Process: Sales transactions  
Measures (Numeric Facts):  
- quantity_sold: Number of units sold  
- unit_price: Price per unit at time of sale  
- discount_amount: Discount applied per line item (default 0)  
- total_amount: Final amount = (quantity_sold × unit_price) - discount_amount  

Foreign Keys:  
- date_key → dim_date  
- product_key → dim_product  
- customer_key → dim_customer  

**DIMENSION TABLE: dim_date**  
Purpose: Time-based analysis  
Type: Conformed dimension  
Attributes:  
- date_key (PK): Surrogate key (integer, YYYYMMDD format)  
- full_date: Actual date (DATE)  
- day_of_week: Monday, Tuesday, etc.  
- day_of_month: 1–31  
- month: 1–12  
- month_name: January, February, etc.  
- quarter: Q1, Q2, Q3, Q4  
- year: e.g., 2024  
- is_weekend: TRUE/FALSE  

**DIMENSION TABLE: dim_product**  
Purpose: Product analysis  
Type: Slowly changing dimension (Type 1 – overwrite)  
Attributes:  
- product_key (PK): Surrogate key (auto-increment)  
- product_id: Original business key (e.g., P001)  
- product_name: Name of the product  
- category: Main category (Electronics, Fashion, Groceries)  
- subcategory: More specific category  
- unit_price: Current/list price  

**DIMENSION TABLE: dim_customer**  
Purpose: Customer analysis and segmentation  
Type: Slowly changing dimension (Type 1)  
Attributes:  
- customer_key (PK): Surrogate key (auto-increment)  
- customer_id: Original business key (e.g., C001)  
- customer_name: Full name (concatenated)  
- city: Customer city  
- state: Customer state  
- customer_segment: e.g., Premium, Regular, New  

## Section 2: Design Decisions (150 words)

The line-item level granularity was chosen because it provides maximum flexibility for analysis — it supports aggregation by product, category, customer, time period, or any combination while preserving detailed transaction data. Using surrogate keys instead of natural/business keys isolates the data warehouse from changes in source systems, simplifies handling of slowly changing dimensions, and improves query performance across tools. This star schema design excels at drill-down (e.g., year → quarter → month via dim_date) and roll-up (e.g., product → subcategory → category) operations through simple star joins. It also enables slicing and dicing by customer attributes or time flags (weekends). The denormalized dimensions reduce join complexity and optimize analytical queries, making it ideal for FlexiMart's reporting and BI needs. (138 words)

## Section 3: Sample Data Flow

**Source Transaction:**  
Order #101, Date: 2024-01-15, Customer: Rahul Sharma (C001, Bangalore), Product: Samsung Galaxy S21 (P001), Quantity: 1, Unit Price: 45999.00, Discount: 0

**Becomes in Data Warehouse:**

**fact_sales row:**  
- sale_key: auto-generated  
- date_key: 20240115  
- product_key: 1  
- customer_key: 1  
- quantity_sold: 1  
- unit_price: 45999.00  
- discount_amount: 0.00  
- total_amount: 45999.00  

**dim_date row (20240115):**  
date_key: 20240115, full_date: '2024-01-15', day_of_week: 'Monday', day_of_month: 15, month: 1, month_name: 'January', quarter: 'Q1', year: 2024, is_weekend: FALSE

**dim_product row (product_key = 1):**  
product_id: 'P001', product_name: 'Samsung Galaxy S21', category: 'Electronics', subcategory: 'Smartphones', unit_price: 45999.00

**dim_customer row (customer_key = 1):**  
customer_id: 'C001', customer_name: 'Rahul Sharma', city: 'Bangalore', state: 'Karnataka', customer_segment: 'Premium'